<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload File</title>
</head>
<body>
    {% if not allow_questions %}
        <h1>Upload a File</h1>
        <form action="/" method="post" enctype="multipart/form-data">
            <input type="file" name="file">
            <input type="submit" value="Upload">
        </form>
    {% endif %}

    {% if message %}
        <p>{{ message }}</p>
    {% endif %}

    <!-- Question-Asking Form (Shown only after successful upload) -->
    {% if allow_questions and not in_quiz_phase %}
        <h2>Ask a Question</h2>
        <form action="/ask" method="post">
            <input type="text" name="question" placeholder="Enter your question here...">
            <input type="submit" value="Ask">
        </form>
        {% if answer %}
            <p><strong>Answer:</strong> {{ answer }}</p>
        {% endif %}
        {% if context %}
            <p><strong>Reference:</strong> {{ context }}</p>
        {% endif %}
    {% endif %}
    <!-- "Start Quiz" Button (shown after a certain number of questions) -->
    {% if show_start_quiz %}
        <form action="/start_quiz" method="get">
            <input type="submit" value="Start Quiz">
        </form>
    {% endif %}
    <!-- Quiz Question and Feedback (if in quiz phase) -->
    {% if in_quiz_phase %}
        {% if question %}
            <h2>Quiz Question:</h2>
            <p>{{ question }}</p>
            <form action="{{ url_for('views.generate_quiz') }}" method="post">
                <input type="text" name="user_answer" placeholder="Enter your answer here...">
                <button type="submit">Submit Answer</button>
            </form>
        {% endif %}
        {% if feedback %}
            <div>
                <h3>Feedback:</h3>
                <p>{{ feedback }}</p>
                <form action="{{ url_for('views.generate_quiz') }}" method="post">
                    <button name="next" type="submit">Next Question</button>
                </form>
            </div>
        {% endif %}
    {% endif %}
</body>
</html>